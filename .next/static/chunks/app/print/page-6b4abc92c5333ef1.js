(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{9703:function(e,t,s){Promise.resolve().then(s.bind(s,6285))},6285:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var r=s(7437),i=s(2265),a=s(7138),l=s(2073);function n(){var e,t;let[s,n]=(0,i.useState)(null),[d,c]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{let e=localStorage.getItem("overtid_print_payload_v1");if(e)try{let t=JSON.parse(e);t&&Array.isArray(t.shifts)&&t.settings&&t.result?n(t):c(!0)}catch(e){c(!0)}else c(!0)},[]),d||!s)return(0,r.jsxs)("div",{className:"p-8 max-w-4xl mx-auto space-y-4",children:[(0,r.jsx)("p",{children:"Ingen data \xe5 skrive ut."}),(0,r.jsx)(a.default,{href:"/",className:"text-blue-600 underline hover:opacity-80",children:"Tilbake til kalkulator"})]});let{shifts:o,settings:m,result:u}=s,h=[...o].sort((e,t)=>e.date.localeCompare(t.date)),x=(null===(e=h[0])||void 0===e?void 0:e.date)||"",p=(null===(t=h[h.length-1])||void 0===t?void 0:t.date)||"";return(0,r.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-8 print:hidden",children:(0,r.jsx)("button",{onClick:()=>{window.print()},className:"rounded-xl border px-6 py-3 font-medium hover:bg-black/5",type:"button",children:"Skriv ut / Lagre som PDF"})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Overtidsrapport"}),x&&p&&(0,r.jsxs)("p",{className:"text-lg opacity-70",children:["Periode: ",x," - ",p]})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold mb-1",children:"Innstillinger"}),(0,r.jsxs)("div",{className:"space-y-1 opacity-80",children:[(0,r.jsxs)("div",{children:["Timesats: ",m.hourlyRate," kr/time"]}),(0,r.jsxs)("div",{children:["Overtidstillegg: ",((m.overtimeMultiplier-1)*100).toFixed(0),"%"]}),(0,r.jsxs)("div",{children:["Grense per dag: ",m.dailyLimitHours," timer"]}),(0,r.jsxs)("div",{children:["Grense per uke: ",m.weeklyLimitHours," timer"]})]})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("table",{className:"w-full border-collapse text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b-2 border-black",children:[(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Dato"}),(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Start"}),(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Slutt"}),(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Pause"}),(0,r.jsx)("th",{className:"text-right py-2",children:"Timer"})]})}),(0,r.jsxs)("tbody",{children:[h.map(e=>{let t=(0,l.X)(e.startTime,e.endTime,e.breakMinutes);return(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("td",{className:"py-2 pr-4",children:e.date}),(0,r.jsx)("td",{className:"py-2 pr-4",children:e.startTime}),(0,r.jsx)("td",{className:"py-2 pr-4",children:e.endTime}),(0,r.jsxs)("td",{className:"py-2 pr-4",children:[e.breakMinutes," min"]}),(0,r.jsx)("td",{className:"py-2 text-right",children:t.toFixed(2)})]},e.id)}),(0,r.jsxs)("tr",{className:"border-t-2 border-black font-semibold",children:[(0,r.jsx)("td",{colSpan:4,className:"py-3 pr-4",children:"Totalt"}),(0,r.jsx)("td",{className:"py-3 text-right",children:u.totalHours})]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Oppsummering"}),(0,r.jsxs)("div",{className:"space-y-1 opacity-80",children:[(0,r.jsxs)("div",{children:["Totale timer: ",u.totalHours]}),(0,r.jsxs)("div",{children:["Ordin\xe6re timer: ",u.ordinaryHours]}),(0,r.jsxs)("div",{children:["Overtidstimer: ",u.overtimeHours]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"L\xf8nn"}),(0,r.jsxs)("div",{className:"space-y-1 opacity-80",children:[(0,r.jsxs)("div",{children:["Grunnl\xf8nn: ",u.basePay.toFixed(2)," kr"]}),(0,r.jsxs)("div",{children:["Overtidstillegg: ",u.overtimeExtra.toFixed(2)," kr"]}),(0,r.jsxs)("div",{className:"font-semibold opacity-100",children:["Totalt: ",u.totalPay.toFixed(2)," kr"]})]})]})]})]})]})}},2073:function(e,t,s){"use strict";function r(e){return Math.round(100*e)/100}function i(e){let[t,s]=e.split(":").map(Number);return isNaN(t)||isNaN(s)?0:60*t+s}function a(e,t){let s=i(e),r=i(t);return r<=s?r+1440-s:r-s}function l(e,t,s){return Math.max(0,a(e,t)-Math.max(0,s||0))/60}function n(e,t){let{hourlyRate:s,overtimeMultiplier:i,dailyLimitHours:l,weeklyLimitHours:n}=t,d={};for(let t of e){let e=Math.max(0,a(t.startTime,t.endTime)-Math.max(0,t.breakMinutes||0))/60;d[t.date]||(d[t.date]={hours:0,dailyOvertime:0}),d[t.date].hours+=e}let c=0;for(let e of Object.keys(d)){let t=Math.max(0,d[e].hours-l);d[e].dailyOvertime=t,c+=t}let o={};for(let t of e){let e=function(e){let t=new Date(e+"T12:00:00");if(isNaN(t.getTime()))return"0000-W00";let s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-r);let i=s.getUTCFullYear();if(isNaN(i))return"0000-W00";let a=new Date(Date.UTC(i,0,4));a.setUTCDate(a.getUTCDate()-(a.getUTCDay()||7)+1);let l=Math.ceil(((s.getTime()-a.getTime())/864e5+1)/7);return"".concat(i,"-W").concat(l.toString().padStart(2,"0"))}(t.date),s=Math.max(0,a(t.startTime,t.endTime)-Math.max(0,t.breakMinutes||0))/60;o[e]||(o[e]=0),o[e]+=s}let m=[],u=0;for(let[e,t]of Object.entries(o)){let s=Math.max(0,t-n);u+=s,m.push({isoWeek:e,hours:r(t),overtime:r(s)})}m.sort((e,t)=>e.isoWeek.localeCompare(t.isoWeek));let h=Object.values(d).reduce((e,t)=>e+t.hours,0),x=Math.max(c,u),p=Math.max(0,h-x),v=h*s,j=x*s*(i-1);return{totalHours:r(h),overtimeHours:r(x),ordinaryHours:r(p),basePay:r(v),overtimeExtra:r(j),totalPay:r(v+j),byDate:Object.fromEntries(Object.entries(d).map(e=>{let[t,s]=e;return[t,{hours:r(s.hours),dailyOvertime:r(s.dailyOvertime)}]})),weeklyHours:r(h),weeklyOvertime:r(u),weeklyOvertimeSum:r(u),dailyOvertimeSum:r(c),weekly:m}}s.d(t,{K:function(){return n},X:function(){return l}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=9703)}),_N_E=e.O()}]);